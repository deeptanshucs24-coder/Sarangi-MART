<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sarangi-MART</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Roboto:wght@400;700&display=swap');

  body {
    margin: 0;
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(to right, #f8ffae, #43c6ac);
    min-height: 100vh;
  }

  header {
    background: linear-gradient(45deg,#ff416c,#ff4b2b);
    color: white;
    text-align: center;
    padding: 25px;
    font-family: 'Fredoka One', cursive;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }

  header img {
    width: 100px;
    border-radius: 50%;
    animation: spin 10s linear infinite;
  }

  @keyframes spin {0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);}}

  h1 { font-size: 36px; margin:10px 0; letter-spacing: 3px; text-shadow: 2px 2px #0003; }

  .instructions {
    background: #fff7e6;
    border: 2px dashed #ffa500;
    color: #6b4c00;
    padding: 15px;
    text-align: center;
    margin: 15px auto;
    width: 90%;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
  }

  .container { display: flex; flex-wrap: wrap; justify-content: space-around; padding: 20px; }
  .products { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; flex: 3; }

  .product-card {
    background: #ffffffcc;
    padding: 15px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    transition: transform 0.3s, box-shadow 0.3s;
    position: relative;
  }

  .product-card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 12px 25px rgba(0,0,0,0.5); }
  .product-card img { width: 150px; height: 150px; object-fit: cover; margin-bottom: 10px; border-radius: 12px; }
  .product-card h2 { font-size: 18px; margin: 5px 0; }
  .product-card p { margin: 3px 0; font-size: 14px; }
  .stock { font-weight: bold; padding: 3px 5px; border-radius: 6px; display: inline-block; }
  .btn-add { margin-top: 8px; padding: 8px 12px; border: none; background: #ff4b2b; color: white; border-radius: 8px; cursor: pointer; transition: 0.3s; }
  .btn-add:hover { background: #ff416c; transform: scale(1.05); }

  .cart {
    flex: 1;
    background: #ffffffcc;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    max-height: 700px;
    overflow-y: auto;
    margin-top: 20px;
  }

  .cart h2 { text-align: center; font-size: 22px; margin-bottom: 10px; }
  .cart ul { list-style: none; padding: 0; }
  .cart li { background: #fffae6; margin: 5px 0; padding: 8px; border-radius: 6px; font-weight: 600; }

  .place-order {
    margin-top: 15px;
    background: #00c853;
    padding: 10px;
    border: none;
    color: white;
    width: 100%;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
  }
  .place-order:hover { background: #00e676; transform: scale(1.05); }

  .user-info input { margin: 5px 0; width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ccc; font-size: 14px; }
  .toast { position: fixed; bottom: 30px; right: 30px; background: #ff4b2b; color: white; padding: 12px 18px; border-radius: 10px; display: none; font-weight: bold; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
</style>
</head>
<body>

<header>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/14/No_Image_Available.jpg/640px-No_Image_Available.jpg" alt="Logo">
  <h1>Sarangi-MART</h1>
  <p>Snacks & Treats — Collect from Room <b>B116</b></p>
</header>

<div class="instructions">
⚠️ Please complete UPI payment to <b>9482104387@fam</b>. Stocks update live.
</div>

<div class="container">
  <div class="products" id="product-list"></div>
  <div class="cart">
    <h2>Your Cart</h2>
    <div class="user-info">
      <input type="text" id="customer-name" placeholder="Your Name">
      <input type="text" id="customer-room" placeholder="Room Number">
      <input type="email" id="customer-email" placeholder="Email">
    </div>
    <ul id="cart-items"></ul>
    <p id="cart-total">Total: ₹0</p>
    <button class="place-order" onclick="placeOrder()">Place Order</button>
  </div>
</div>

<div class="toast" id="toast">Item added to cart!</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init("NHTKUf_XQBBT-W7PY");

let products = [
    { name:"Kukure Green Chutney", stock:0, price:20, img:"https://www.jiomart.com/images/product/original/490005861/kurkure-green-chutney-style-90-g-product-images-o490005861-p490005861-0-202306150529.jpg" },
    { name:"Puffcorn", stock:0, price:20, img:"https://www.jiomart.com/images/product/original/490008813/kurkure-puffcorn-yummy-cheese-90-g-product-images-o490008813-p490008813-0-202304281510.jpg" },
    { name:"KitKat", stock:0, price:10, img:"https://www.jiomart.com/images/product/original/491107973/nestle-kitkat-chocolate-37-3-g-product-images-o491107973-p491107973-0-202203170441.jpg" },
    { name:"Chocopie", stock:0, price:12, img:"https://www.jiomart.com/images/product/original/490000156/orion-choco-pie-336-g-product-images-o490000156-p490000156-0-202203150441.jpg" },
    { name:"Uncle Chips", stock:0, price:50, img:"https://www.jiomart.com/images/product/original/490009786/uncle-chips-spicy-treat-60-g-product-images-o490009786-p490009786-0-202207121440.jpg" },
    { name:"Yoga Protein Bar Blueberry", stock:0, price:40, img:"https://www.jiomart.com/images/product/original/rvdbclzdk2/yoga-bar-protein-bar-blueberry-pie-65-g-product-images-orvdbclzdk2-p591771596-0-202203141609.jpg" },
    { name:"Strawberry Protein Bar", stock:0, price:40, img:"https://www.jiomart.com/images/product/original/491337381/yoga-bar-protein-bar-strawberry-65-g-product-images-o491337381-p491337381-0-202203150321.jpg" },
    { name:"Lays Magic Masala", stock:0, price:20, img:"https://www.jiomart.com/images/product/original/491258623/lays-indias-magic-masala-chips-115-g-product-images-o491258623-p491258623-0-202307281201.jpg" },
    { name:"Lays Hot & Sweet", stock:0, price:30, img:"https://www.jiomart.com/images/product/original/490008802/lays-hot-sweet-chilli-chips-52-g-product-images-o490008802-p490008802-0-202203170447.jpg" },
    { name:"Bingo Mad Angles Very Peri Peri", stock:0, price:50, img:"https://www.jiomart.com/images/product/original/491509087/bingo-mad-angles-very-peri-peri-72-g-product-images-o491509087-p491509087-0-202203170502.jpg" },
    { name:"Hide & Seek", stock:0, price:30, img:"https://www.bigbasket.com/media/uploads/p/xxl/40225894_2_parle-hide-seek-fab-vanilla-choco-chip-cookies.jpg" }
];

let cart = [];

function renderProducts() {
    const container = document.getElementById('product-list');
    container.innerHTML = '';
    products.forEach((p, i)=>{
        container.innerHTML += `
        <div class="product-card">
          <img src="${p.img}" alt="${p.name}">
          <h2>${p.name}</h2>
          <p>Price: ₹${p.price}</p>
          <p class="stock">Stock: ${p.stock}</p>
          <button class="btn-add" ${p.stock<=0?"disabled":""} onclick="addToCart(${i})">
            ${p.stock<=0?"Out of Stock":"Add to Cart"}
          </button>
        </div>
        `;
    });
}

function addToCart(i){
    if(products[i].stock>0){
        cart.push({...products[i]});
        products[i].stock--;
        renderProducts();
        renderCart();
        showToast("Added to cart!");
    }
}

function renderCart(){
    const ul = document.getElementById('cart-items');
    const totalEl = document.getElementById('cart-total');
    ul.innerHTML = '';
    let total = 0;
    cart.forEach(item => { 
        ul.innerHTML += `<li>${item.name} - ₹${item.price}</li>`; 
        total += item.price;
    });
    totalEl.innerText = `Total: ₹${total}`;
}

function placeOrder(){
    const name = document.getElementById('customer-name').value.trim();
    const room = document.getElementById('customer-room').value.trim();
    const email = document.getElementById('customer-email').value.trim();

    if(!name || !room || !email){
        alert("Please fill Name, Room Number & Email!");
        return;
    }
    if(cart.length===0){ alert("Cart is empty!"); return; }

    const orderItems = cart.map(i=>i.name).join(", ");
    const total = cart.reduce((sum,i)=>sum+i.price,0);

    const templateParams = {
        from_name: name,
        to_email: email,
        room_number: room,
        order_items: orderItems,
        order_total: total
    };

    emailjs.send('service_glpy52q','template_lmdqequ', templateParams)
        .then(res=>{
            alert("✅ Order placed! Check your email for confirmation. Total: ₹"+total);
            cart=[]; renderCart(); renderProducts();
        }).catch(err=>{
            alert("❌ Failed to send email. Error: "+JSON.stringify(err));
        });
}

function showToast(msg){
    const t = document.getElementById('toast');
    t.innerText = msg; t.style.display='block';
    setTimeout(()=>{ t.style.display='none'; },1500);
}

renderProducts();
renderCart();
</script>
</body>
</html>

