<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Order Checkout</title>
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
  <script>
    (function() {
      // Initialize EmailJS with your Public Key
      emailjs.init("NHtKUf_XQBBT-W7PY");
    })();
  </script>
</head>
<body>
  <h1>Place Your Order</h1>
  <form id="orderForm">
    <label>Name:</label><br>
    <input type="text" id="name" required><br><br>
    
    <label>Email:</label><br>
    <input type="email" id="email" required><br><br>
    
    <label>Product:</label><br>
    <select id="product" required>
      <option value="Kurkure Green Chutney">Kurkure Green Chutney</option>
      <option value="KitKat">KitKat</option>
      <option value="ChocoPie">ChocoPie</option>
      <option value="Uncle Chips">Uncle Chips</option>
    </select><br><br>
    
    <label>Quantity:</label><br>
    <input type="number" id="quantity" min="1" required><br><br>
    
    <button type="submit">Place Order</button>
  </form>

  <p id="status"></p>

  <script>
    document.getElementById("orderForm").addEventListener("submit", function(event) {
      event.preventDefault();

      // Generate unique order ID
      const orderId = "ORD" + Date.now();

      // Collect form values
      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const product = document.getElementById("product").value;
      const quantity = document.getElementById("quantity").value;

      // Prepare template parameters
      const templateParams = {
        order_id: orderId,
        customer_name: name,
        customer_email: email,
        product_name: product,
        quantity: quantity
      };

      // Send mail via EmailJS
      emailjs.send("service_glpy52q", "template_yuafcfb", templateParams)
      .then(function(response) {
          document.getElementById("status").innerText = 
            "✅ Order placed successfully! Confirmation sent to your email.";
          console.log("SUCCESS!", response.status, response.text);
      }, function(error) {
          document.getElementById("status").innerText = 
            "❌ Failed to place order. Try again.";
          console.error("FAILED...", error);
      });
    });
  </script>
</body>
</html>
